import { useState } from "react";
import "./ThirdStep.css";

export default function ThirdStep({ onNext }) {
  const [stage, setStage] = useState(0);
  const [clickCount, setClickCount] = useState(0);

  // Stage 0: –ü–µ—Ä–≤—ã–π —ç–∫—Ä–∞–Ω - "–õ–∞–¥–Ω–æ, –¥–∞–≤–∞–π –±–µ–∑ —à—É—Ç–æ–∫"
  if (stage === 0) {
    return (
      <div className="third-step">
        <h1>–õ–∞–¥–Ω–æ, –¥–∞–≤–∞–π —Å–µ—Ä—å–µ–∑–Ω–æ –∏ –±–µ–∑ —à—É—Ç–æ–∫ üòê</h1>
        <p className="holiday-text">–°–µ–≥–æ–¥–Ω—è –≤–µ–¥—å –¥—Ä—É–≥–æ–π –∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫!</p>
        <button onClick={() => setStage(1)}>–ù—É –∫–æ–Ω–µ—á–Ω–æ</button>
      </div>
    );
  }

  // Stage 1: –í—Ç–æ—Ä–æ–π —ç–∫—Ä–∞–Ω - "–°–µ–≥–æ–¥–Ω—è –¥–µ–Ω—å –¥—É—à–µ–≤–Ω–æ-–±–æ–ª—å–Ω—ã—Ö"
  if (stage === 1) {
    return (
      <div className="third-step">
        <h1>–î–µ–Ω—å –¥—É—à–µ–≤–Ω–æ-–±–æ–ª—å–Ω—ã—Ö!</h1>
        <p className="holiday-text">–≠—Ç–æ –ø—Ä–∞–∑–¥–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–º–µ—á–∞–µ—Ç—Å—è –≤ –ì–µ—Ä–º–∞–Ω–∏–∏!  üá©üá™</p>
        <button onClick={() => setStage(2)}>–î–∞, —Ç–æ—á–Ω–æ, –∫–∞–∫ –∂–µ —è –∑–∞–±—ã–ª–∞!</button>
      </div>
    );
  }

  // Stage 2: –¢—Ä–µ—Ç–∏–π —ç–∫—Ä–∞–Ω - "–î–∞ —á—Ç–æ —Ç—ã –≥–æ–Ω–∏—à—å?" —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏
  const getButtonText = () => {
    switch(clickCount) {
      case 0:
        return "–õ–∞–¥–Ω–æ, –Ω–æ –∑–∞—Ç–æ —Ç–µ–ø–µ—Ä—å –±—É–¥—É –∑–Ω–∞—Ç—å";
      case 1:
        return "–ü—Ä–∏–∫–æ–ª—å–Ω–æ";
      case 2:
        return "–ï—â–µ –ø—Ä–∏–∫–æ–ª—å–Ω–µ–µ";
      case 3:
        return "–û—Ö —É–∂ —ç—Ç–∏ –Ω–µ–º—Ü—ã";
      case 4:
        return "–ï—Å—Ç—å —Ç–∞–∫–æ–µ :)";
      default:
        return "–î–∞–ª—å—à–µ";
    }
  };

  return (
    <div className="third-step">
      {clickCount === 0 ? (
        <h1>–î–∞ —á—Ç–æ —Ç—ã –≥–æ–Ω–∏—à—å? üòè</h1>
      ) : (
        <h1>–§–∞–∫—Ç—ã –æ –ø—Ä–∞–∑–¥–Ω–∏–∫–µ üìö</h1>
      )}
      {clickCount === 0 ? (
        <p className="holiday-text">–ó–∞–±—ã–ª–∞ –æ–Ω–∞. –¢—ã –∂–µ –∑–Ω–∞—Ç—å –Ω–µ –∑–Ω–∞–ª–∞ –æ–± —ç—Ç–æ–º –ø—Ä–∞–∑–¥–Ω–∏–∫–µ.</p>
      ) : (
        <p className="holiday-text"></p>
      )}
      {clickCount === 1 && (
        <p className="holiday-details">–°–≤—è—Ç–æ–π –í–∞–ª–µ–Ω—Ç–∏–Ω –≤ –Ω–µ–º–µ—Ü–∫–æ–π —Ç—Ä–∞–¥–∏—Ü–∏–∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞—Å—Ç—É–ø–Ω–∏–∫–æ–º —Å—É–º–∞—Å—à–µ–¥—à–∏—Ö.</p>
      )}
      {clickCount === 2 && (
        <p className="holiday-details">–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∫–ª–∏–Ω–∏–∫–∞—Ö –ì–µ—Ä–º–∞–Ω–∏–∏ –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å —É–∫—Ä–∞—à–∞—é—Ç –∑–¥–∞–Ω–∏—è, –∞ –≤ —á–∞—Å–æ–≤–Ω—è—Ö –ø—Ä–æ—Ö–æ–¥—è—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–ª—É–∂–±—ã.</p>
      )}
      {clickCount === 3 && (
        <p className="holiday-details">–ü—Ä–∞–∑–¥–Ω–∏–∫ —Å–ª—É–∂–∏—Ç –∏—Ä–æ–Ω–∏—á–Ω—ã–º –ø—Ä–æ—Ç–∏–≤–æ–≤–µ—Å–æ–º –∫–æ–º–º–µ—Ä—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –î–Ω—è —Å–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞.</p>
      )}
      {clickCount === 4 && (
        <p className="holiday-details final-message">–í –∫–∞–∫–æ–π-—Ç–æ —Å—Ç–µ–ø–µ–Ω–∏ –æ–Ω –æ–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫—É—é –¥–∞—Ç—É ‚Äî –≤–µ–¥—å –≤—Å–µ –≤–ª—é–±–ª–µ–Ω–Ω—ã–µ –Ω–µ–º–Ω–æ–≥–æ —Å—É–º–∞—Å—à–µ–¥—à–∏–µ.</p>
      )}
      <button onClick={() => {
        if (clickCount < 4) {
          setClickCount(clickCount + 1);
        } else {
          onNext("–î–µ–Ω—å –¥—É—à–µ–≤–Ω–æ-–±–æ–ª—å–Ω—ã—Ö");
        }
      }}>
        {getButtonText()}
      </button>
    </div>
  );
}
